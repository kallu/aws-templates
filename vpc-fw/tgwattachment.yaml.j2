  InspectionTgwAttachment:
    Type: AWS::EC2::TransitGatewayVpcAttachment
    Condition: HasTgwAttachment
    Properties:
      VpcId: !Ref InspectionVPC
      TransitGatewayId: !Ref TgwAttachment
      Tags:
        - Key: "Name"
          Value: !Sub '${AWS::StackName} Inspection VPC'
      SubnetIds:
{%- for x in AZ %}
        - !Ref InspectionTGWSubnet{{x.az|upper}}
{%- endfor %}

  EgressTgwAttachment:
    Type: AWS::EC2::TransitGatewayVpcAttachment
    Condition: HasTgwAttachment
    Properties:
      VpcId: !Ref EgressVPC
      TransitGatewayId: !Ref TgwAttachment
      Tags:
        - Key: "Name"
          Value: !Sub '${AWS::StackName} Egress VPC'
      SubnetIds:
{%- for x in AZ %}
        - !Ref EgressTGWSubnet{{x.az|upper}}
{%- endfor %}
