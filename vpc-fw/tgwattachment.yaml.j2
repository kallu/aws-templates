  InternalInspectionTgwAttachment:
    Type: AWS::EC2::TransitGatewayVpcAttachment
    Condition: HasTgwAttachment
    Properties:
      VpcId: !Ref InternalInspectionVPC
      TransitGatewayId: !Ref TgwAttachment
      Tags:
        - Key: "Name"
          Value: !Sub '${AWS::StackName} Internal Inspection VPC'
      SubnetIds:
{%- for x in AZ %}
        - !Ref InternalInspectionTGWSubnet{{x.az|upper}}
{%- endfor %}

  ExternalInspectionTgwAttachment:
    Type: AWS::EC2::TransitGatewayVpcAttachment
    Condition: HasTgwAttachment
    Properties:
      VpcId: !Ref ExternalInspectionVPC
      TransitGatewayId: !Ref TgwAttachment
      Tags:
        - Key: "Name"
          Value: !Sub '${AWS::StackName} On-Prem Inspection VPC'
      SubnetIds:
{%- for x in AZ %}
        - !Ref ExternalInspectionTGWSubnet{{x.az|upper}}
{%- endfor %}

  EgressTgwAttachment:
    Type: AWS::EC2::TransitGatewayVpcAttachment
    Condition: HasTgwAttachment
    Properties:
      VpcId: !Ref EgressVPC
      TransitGatewayId: !Ref TgwAttachment
      Tags:
        - Key: "Name"
          Value: !Sub '${AWS::StackName} Egress VPC'
      SubnetIds:
{%- for x in AZ %}
        - !Ref EgressTGWSubnet{{x.az|upper}}
{%- endfor %}
